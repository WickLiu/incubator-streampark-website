"use strict";(self.webpackChunkapache_streampark_website=self.webpackChunkapache_streampark_website||[]).push([[3078],{831:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>p,frontMatter:()=>o,metadata:()=>r,toc:()=>d});var t=s(86070),i=s(76113);const o={id:"k8s-pvc-integration",title:"Kubernetes PVC Resource usage",sidebar_position:2},c=void 0,r={id:"flink-k8s/k8s-pvc-integration",title:"Kubernetes PVC Resource usage",description:"Resource usage instructions of K8s PVC",source:"@site/docs/flink-k8s/2-k8s-pvc-integration.md",sourceDirName:"flink-k8s",slug:"/flink-k8s/k8s-pvc-integration",permalink:"/docs/flink-k8s/k8s-pvc-integration",draft:!1,unlisted:!1,editUrl:"https://github.com/apache/incubator-streampark-website/edit/dev/docs/flink-k8s/2-k8s-pvc-integration.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{id:"k8s-pvc-integration",title:"Kubernetes PVC Resource usage",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Flink on K8s ",permalink:"/docs/flink-k8s/k8s-dev"},next:{title:"Hadoop Resource Integration",permalink:"/docs/flink-k8s/hadoop-resource-integration"}},a={},d=[{value:"Resource usage instructions of K8s PVC",id:"resource-usage-instructions-of-k8s-pvc",level:2}];function l(e){const n={code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"resource-usage-instructions-of-k8s-pvc",children:"Resource usage instructions of K8s PVC"}),"\n",(0,t.jsx)(n.p,{children:"The support for pvc resource(mount file resources such as checkpoint/savepoint/logs and so on) is based on pod-template at current version\u3002"}),"\n",(0,t.jsxs)(n.p,{children:["Users do not have to concern the Native-Kubernetes Session.It will be processed when Session Cluster is constructed .Native-Kubernetes Application can be constructed by configuring on StreamPark webpage using ",(0,t.jsx)(n.code,{children:"pod-template"}),"\u3001",(0,t.jsx)(n.code,{children:"jm-pod-template"}),"\u3001",(0,t.jsx)(n.code,{children:"tm-pod-template"}),"."]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(n.p,{children:["Here is a brief example. Two PVC ",(0,t.jsx)(n.code,{children:"flink-checkpoint"}),"\uff0c ",(0,t.jsx)(n.code,{children:"flink-savepoint"})," should be constructed in advance"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Kubernetes PVC",src:s(31858).A+"",width:"2476",height:"1842"})}),"\n",(0,t.jsx)(n.p,{children:"'pod-template' can be configured as below \uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Pod\nmetadata:\n  name: pod-template\nspec:\n  containers:\n    - name: flink-main-container\n      volumeMounts:\n        - name: checkpoint-pvc\n          mountPath: /opt/flink/checkpoints\n        - name: savepoint-pvc\n          mountPath: /opt/flink/savepoints\n  volumes:\n    - name: checkpoint-pvc\n      persistentVolumeClaim:\n        claimName: flink-checkpoint\n    - name: savepoint-pvc\n      persistentVolumeClaim:\n        claimName: flink-savepoint\n"})}),"\n",(0,t.jsxs)(n.p,{children:["There are three ways to provide the dependency when using ",(0,t.jsx)(n.code,{children:"rocksdb-backend"}),"."]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Flink Base Docker Image contains the dependency\uff08user fix the dependency conflict by themself\uff09;"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Put the dependency ",(0,t.jsx)(n.code,{children:"flink-statebackend-rocksdb_xx.jar"})," to  the path ",(0,t.jsx)(n.code,{children:"Workspace/jars"})," in StreamPark ;"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Add the rockdb-backend dependency to StreamPark Dependency(StreamPark will fix the conflict automatically) \uff1a"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"rocksdb dependency",src:s(65564).A+"",width:"1698",height:"926"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)(n.p,{children:"We will provide a graceful way to generate pod-template configuration to simplify the procedure of k8s-pvc mounting in future version."})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},31858:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/k8s_pvc-cdeee4dafe036102e017aad3b6c13f5d.png"},65564:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/rocksdb_dependency-932be3682bef8d8cd169522c00cfd12b.png"},76113:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>r});var t=s(30758);const i={},o=t.createContext(i);function c(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);